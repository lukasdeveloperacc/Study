# Slash Command
- \/ 로 시작하는 툭수 명령어로 특정 작업을 즉시 실행
- 반복 작업 자동화, 일관된 작업 수행
- 활용 : 코드 리뷰, 배포, 테스트, 문서화 등

## Slash command의 구조
```
.claude/
├── commands/
│   ├── review.md         # 코드 리뷰 명령어
│   ├── deploy.md         # 배포 명령어
│   ├── test.md          # 테스트 명령어
│   ├── optimize.md      # 최적화 명령어
│   └── document.md      # 문서화 명령어
└── settings.json  # 명령어 설정
```

## 사용자 정의 Slash Command 구현
```bash
mkdir -p .claude/commands
echo "Analyze this code for performance issues and suggest optimizations:" > .claude/commands/optimize.md
```

or

```
/optimize 명령어 만들어줘

대상 파일을 입력받고, 성능/메모리/번들사이즈 관점에서
최적화 제안을 코드와 함께 제공하는 명령어
```
- vibe 코딩

## 나만의 Workflow 설계
- 요구사항
  - Linear MCP 서버 연결 필요
  - fastcampus-seminar-02 팀에 이슈 생성
  - Sub-issue로 연결되는 구조적인 이슈 생성

```
linear mcp를 사용해서 linear team "fastcampus-seminar-02"에 구조화된 issue를 생성하는 /create-linear-issues 명령어 만들어줘

메인 이슈를 만들고 그 아래 sub-issue들을 자동으로 연결해

참조: https://docs.claude.com/ko/docs/claude-code/slash-commands#custom-slash-commands
```

```
/create-linear-issues 사용자 인증 시스템
```
- 명령어 사용 예시

# Sub Agent
- 사용 이유
  - 메인 세션에서 이슈 분석 시 100개 파일 -> 컨텍스트 미친듯한 소진
  - Sub Agent는 별도 컨텍스트에서 100개 파일을 분석하여 핵심 5만 추출
  - 메인 세션은 꺠끗한 상태로 정확한 5개 파일로 코딩을 시작

## Slash Command와 비교
| 비교 항목 | Slash Command | Sub Agent |
| --- | --- | --- |
| 컨텍스트 | 메인 대화에 포함 (오염됨) | 독립적인 컨텍스트 윈도우 |
| 용도 | 템플릿 기반 반복 작업 | 대량 분석 후 핵심 추출 |
| 컨텍스트 보존 | ❌ 메인 컨텍스트 소모 | ✅ 메인 컨텍스트 보존 |
| 체이닝 | 어려움 | 여러 에이전트 순차 실행 가능 |

## 생성 방법
```
# 대화형 에이전트 생성 모드 진입
> /agents

# 그 다음 원하는 에이전트를 자연어로 설명
"코드 리뷰 전문 에이전트를 만들어줘.
이름은 code-reviewer로 하고,
Read, Grep, Glob 도구만 사용하도록 해줘.
프로젝트 범위로 생성해."
```
- 가장 쉽고 효과적인 방법
- 수동 생성은 비추천

## 구조
```
# 프로젝트 범위 (팀 공유)
.claude/agents/
├── code-reviewer.md
├── ultimate-planner.md
└── test-generator.md

# 사용자 범위 (개인용)
~/.config/claude-code/agents/
├── personal-assistant.md
└── custom-analyzer.md
```

## Ultimate Planner Agent
```
1. Linear에서 이슈 확인 → 이슈 ID: LIN-456
2. 관련 파일 찾기 위해 grep으로 검색
3. 50개 파일 발견... 하나씩 읽어봄
4. Git 로그도 검색해서 관련 커밋 확인
5. 메인 컨텍스트가 이미 80% 소진됨
6. 정작 코딩할 때 컨텍스트 부족으로 품질 저하
```
- 일반적 이슈 해결 과정

```
@ultimate-planner LIN-456

# → 별도 컨텍스트에서:
#   1. Linear 이슈 전체 내용 + 관련 이슈 조회
#   2. 코드베이스 전체 탐색
#   3. Git 로그 분석
#   4. 핵심 5개 파일만 추출하여 반환

# → 메인 세션은 깨끗한 상태로
#   정확한 5개 파일만 열어 효율적으로 코딩 ✨
```

```
/agents

Linear 이슈를 조사하고 코드베이스를 분석해서
이슈 해결에 필요한 핵심 컨텍스트만 추출하는
ultimate-planner 서브 에이전트를 만들어줘.

**요구사항:**

1. **Linear 이슈 조사**
   - Team: fastcampus-seminar-02
   - 이슈 title, description, comment 조회
   - Parent/Sub 이슈가 있다면 해당 이슈도 조사
2. **코드베이스 탐색**
3. **Git 로그 검색**
```

```
@ultimate-planner {issue-id or issue description}
```
- 사용 방법

## 활용 전략
```
@agent-ultimate-planner LIN-456
```
- 명시적 호출
- 이슈 ID로 호출

```
"LIN-789 이슈 해결해줘"
```
- 자동 위임
- description 필드를 명확하게 작성해야 자동 선택이 잘됨.
- 에이전트 이름도 직관적이어야함.

# Hooks, Output Styles
## Hook
- Claude Code가 도구 사용 시 자동으로 실행되는 스크립트
- 목적 : 도구 호출 제어, 결과 로깅, 워크플로우 자동화

## 이벤트 타입
- PreToolUse : 도구 파라미터 생성 후 실제 실행 전 트리거
  - 도구 호출 차단 및 피드백 제공 가능
  - 매처 : Task, Bash, Glob, Grep, REad, Edit, Write, WebFetch
- PostToolUse : 도구가 성공적으로 완료된 직 후 실행
  - 결과 로깅 후처리 작업에 활용
  - 매처 : Task, Bash, Glob, Grep, REad, Edit, Write, WebFetch
- Notification
  - 알림 발생 시 트리거
  - 도구 사용 권한 요청 시
  - 프롬프트 입력이 60초 이상 유휴 상태일 때
- User Prompt Submit
  - 프롬프트 제출 시
  - 컨텍스트 추가, 프롬프트 검증, 특정 타입 차단 가능
- Stop
  - 에이전트 응답 완료 시
  - 사용자 중단으로 인한 정지 시에는 실행 안됨
- SubagentStop
  - 서브에이전트(Task 도구 호출) 응답 완료 시
- PreCompact
  - Claude code가 컴팩트 작업 수행하지 전에 실행
- SessionStart
  - 새 세션 시작 시 혹은 재개 시 실행
  - 매처 : startup, resume, clear, compact
- SessionEnd
  - 세션 종료 시 실행
  - 정리 작업, 로깅, 세션 상태 저장에 활용

## 핵심 개념
- Matcher : 특저 도구나 이벤트에만 훅 적용
- 설정 위치 User 또는 Project (~/claude/settings.json or .claude/settings.json)
- 차단 기능 : PreToolUse, UserPromptSubmit 은 작업을 차단하고 피드백 제공 가능
- 비동기 처리 : 백그라운드 작업 시 & 사용하지 않고 설정에서 비동기 옵션을 활용

# 훅 만들기
```
/hooks
```
- 매처 추가 : Bash, ... etc
- 훅 명령어 추가
- 구성 저장 : User settings 등
  - 이후 Esc로 REPL로 복귀
- ~/.claude/settings.json 에서 hook 확인

```bash
# Claude에게 요청
"ls 명령어를 실행해줘"

# 로그 확인
cat ~/.claude/bash-command-log.txt
```
- bash Command 로그 남기는 bash 훅 테스트
